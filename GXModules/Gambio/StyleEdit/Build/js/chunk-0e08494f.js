(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e08494f"],{9334:function(t,e,a){"use strict";a("9fa8")},"971a":function(t,e,a){"use strict";a("ca39")},"97b0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"option-container option-repeater"},[e("repeater-preview",{attrs:{items:t.repeaterValues,"can-delete":t.repeaterValues.length>t.value.attributes.min,"item-label":t.itemLabel,"default-active-item-index":t.defaultActiveItemIndex,"can-set-default-active-index":t.canSetDefaultActiveIndex},on:{editItem:t.editItem,deleteItem:t.removeItem,change:t.changeOrder}}),e("div",{staticClass:"d-flex p-2 action-buttons"},[e("button",{staticClass:"btn btn-sm btn-success mr-1 add-new",attrs:{title:t.addItemLabel,disabled:t.repeaterValues.length>=t.value.attributes.max},on:{click:function(e){return t.openRepeaterEditor(!0)}}},[e("custom-icon",{attrs:{icon:"add"}})],1),e("button",{staticClass:"btn btn-sm btn-primary ml-1",on:{click:function(e){return t.openRepeaterEditor(!1)}}},[e("custom-icon",{attrs:{icon:"cog","custom-class":"mr-2"}}),e("span",{staticClass:"d-block",domProps:{textContent:t._s(t.$t("editor.options.repeater.buttons.settings"))}})],1)]),e("b-modal",{ref:"repeaterModal",attrs:{noEnforceFocus:!0,noCloseOnBackdrop:!0,noCloseOnEsc:!0,visible:t.editRepeater,centered:"","no-fade":"",title:t.value.label||t.$t("editor.options.repeater.itemsLabel"),size:"lg","modal-class":"popup-modal repeater-modal"},on:{hidden:t.cancelRepeaterEditor}},[e("language-switcher"),e("div",{staticClass:"repeater__wrapper"},[e("div",{staticClass:"repeater__tabs"},[e("draggable",{staticClass:"repeater__tabs--navigation",attrs:{group:"repeaterValues",handle:".move-item"},on:{start:function(e){t.dragging=!0},stop:function(e){t.dragging=!1},change:function(e){return t.$emit("change",e)}},model:{value:t.repeaterList,callback:function(e){t.repeaterList=e},expression:"repeaterList"}},t._l(t.repeaterList,(function(a,i){return e("div",{key:i,staticClass:"repeater__tabs--navigation-item",class:{"active-item":t.activeTab===i}},[e("button",{staticClass:"btn btn-transparent btn-sm move-item"},[e("custom-icon",{attrs:{icon:"sort"}})],1),e("div",{staticClass:"title-wrapper",on:{click:function(e){return t.toggleActiveTab(i)}}},[e("span",{staticClass:"title"},[t._v(t._s(a[0].value[t.language]||"Untitled"))]),e("span",{staticClass:"d-block text-muted"},[t._v(t._s(t.itemLabel)+" #"+t._s(i+1))])]),e("div",{staticClass:"ml-auto item-actions"},[t.canSetDefaultActiveIndex?e("b-button",{staticClass:"btn-sm",attrs:{variant:"link"},on:{click:function(e){t.activeItem=i}}},[e("custom-icon",{attrs:{icon:t.isActiveItem(i)?"star":"star-outline",height:"14"}})],1):t._e(),t.repeaterList.length>t.value.attributes.min?e("button",{staticClass:"btn btn-danger btn-sm ml-1",on:{click:function(e){return t.removeRow(i)}}},[e("custom-icon",{attrs:{icon:"close",height:"13"}})],1):t._e()],1)])})),0),e("div",{staticClass:"repeater__tabs--content"},t._l(t.repeaterList,(function(a,i){return e("div",{key:i,staticClass:"repeater__item",class:{"d-none":t.activeTab!==i}},t._l(a,(function(s,n){return e(s.type,{key:s.id,tag:"component",attrs:{id:s.id,label:s.label,language:t.language},on:{triggerSave:function(e){return t.handleTriggerSave(e,s,n,i)}},model:{value:a[n],callback:function(e){t.$set(a,n,e)},expression:"opt[index]"}})})),1)})),0)],1)]),e("template",{slot:"modal-footer"},[e("div",{staticClass:"repeater__wrapper--footer clearfix"},[e("button",{staticClass:"btn btn-success btn-sm",attrs:{disabled:t.repeaterList.length>=t.value.attributes.max},on:{click:t.addRow}},[t._v(" "+t._s(t.addItemLabel)+" ")]),e("div",{staticClass:"modal-actions"},[e("button",{staticClass:"btn btn-default btn-sm",domProps:{textContent:t._s(t.$t("editor.options.repeater.buttons.cancel"))},on:{click:t.cancelRepeaterEditor}}),e("button",{staticClass:"btn btn-primary btn-sm ml-2",domProps:{textContent:t._s(t.$t("editor.options.repeater.buttons.confirm"))},on:{click:t.saveRepeaterEditor}})])])])],2)],1)},s=[],n=(a("6b54"),a("ac6a"),a("944a")),r=a("b76a"),c=a.n(r),o=a("b092"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"repeater__preview"},[e("ul",{staticClass:"list-items"},[e("draggable",{attrs:{group:"repeaterValues",handle:".move-item"},model:{value:t.itemsList,callback:function(e){t.itemsList=e},expression:"itemsList"}},t._l(t.itemsList,(function(a,i){return e("li",{key:i},[e("b-button",{staticClass:"move-item",attrs:{variant:"transparent",size:"small"}},[e("custom-icon",{attrs:{icon:"sort"}})],1),e("div",{staticClass:"title-wrapper",on:{click:function(e){return t.$emit("editItem",i)}}},[e("span",{staticClass:"title"},[t._v(t._s(a[0].value[t.language]||"Untitled"))]),e("span",{staticClass:"d-flex align-items-center text-muted"},[t._v(" "+t._s(t.itemLabel)+" #"+t._s(i+1)+" "),t.defaultActiveItem===i&&t.canSetDefaultActiveIndex?e("custom-icon",{attrs:{icon:"star",color:"#fdc300",width:"14",height:"14","custom-class":"mt-n1 ml-1"}}):t._e()],1)]),e("div",{staticClass:"ml-auto"},[t.canDelete?e("b-button",{staticClass:"btn-sm delete-item",attrs:{variant:"danger"},on:{click:function(e){return t.$emit("deleteItem",i)}}},[e("custom-icon",{attrs:{icon:"close",height:"13"}})],1):t._e()],1)],1)})),0)],1)])},u=[],d={props:["items","canDelete","itemLabel","defaultActiveItemIndex","canSetDefaultActiveIndex"],components:{draggable:c.a,CustomIcon:o["a"]},computed:{language:function(){return this.$store.state.editor.currentLanguage},itemsList:{get:function(){return this.items},set:function(t){this.$emit("change",t)}},defaultActiveItem:function(){return parseInt(this.defaultActiveItemIndex)}}},p=d,m=(a("971a"),a("2877")),v=Object(m["a"])(p,l,u,!1,null,"45beded8",null),b=v.exports,f=a("d3f7"),h={props:["value"],extends:n["a"],components:{LanguageSwitcher:f["a"],RepeaterPreview:b,draggable:c.a,CustomIcon:o["a"]},data:function(){return{dragging:!0,editRepeater:!1,repeaterList:[],activeTab:0,activeItem:this.value.attributes.defaultActiveIndex}},computed:{language:function(){return this.$store.state.editor.currentLanguage},addItemLabel:function(){return this.value.attributes.addMoreLabel?this.value.attributes.addMoreLabel:this.$t("editor.options.repeater.buttons.addMoreLabel")},itemLabel:function(){return this.value.attributes.itemLabel?this.value.attributes.itemLabel:this.$t("editor.options.repeater.itemLabel")},repeaterFields:function(){return this.value.fields},repeaterValues:{get:function(){return this.value.value},set:function(t){this.value.value=t}},canSetDefaultActiveIndex:function(){return this.value.attributes.canSetDefaultActiveIndex||!1},defaultActiveItemIndex:{get:function(){return this.value.attributes.defaultActiveIndex},set:function(t){this.value.attributes.defaultActiveIndex=t}}},methods:{addRow:function(){var t=JSON.parse(JSON.stringify(this.repeaterFields));t.forEach((function(t){var e=t.id+"_"+Math.random().toString(36).substr(2,9);t.repeaterField=t.id,t.id=e})),this.repeaterList.push(t),this.activeTab=this.repeaterList.length-1},handleTriggerSave:function(t,e,a,i){this.repeaterList[i][a]=e,this.$emit("triggerSave",this.repeaterList)},removeRow:function(t){this.repeaterList.splice(t,1),this.activeTab=this.repeaterList.length-1,this.activeItem=0},removeItem:function(t){this.repeaterValues.splice(t,1),this.defaultActiveItemIndex=0,this.activeItem=0},openRepeaterEditor:function(t){this.repeaterList=JSON.parse(JSON.stringify(this.value.value)),this.activeTab=0,this.editRepeater=!0,t&&this.addRow()},saveRepeaterEditor:function(){this.repeaterValues=this.repeaterList,this.$emit("changeActiveItem",this.activeItem,this.repeaterList),this.editRepeater=!1},cancelRepeaterEditor:function(){this.repeaterList=[],this.editRepeater=!1,this.activeItem=this.defaultActiveItemIndex},toggleActiveTab:function(t){this.activeTab=t},editItem:function(t){this.openRepeaterEditor(),this.activeTab=t},changeOrder:function(t){this.repeaterValues=t},isActiveItem:function(t){return parseInt(this.activeItem)===t}}},g=h,I=(a("9334"),Object(m["a"])(g,i,s,!1,null,"5ae46981",null));e["default"]=I.exports},"9fa8":function(t,e,a){},ca39:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0e08494f.js.map