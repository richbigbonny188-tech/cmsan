"use strict";!function(){var n=function(n){return KlarnaHub.Config.appUrl+"admin/admin.php?do=KlarnaHub/"+n+"&orderNumber="+KlarnaHub.Config.orderNumber+"&moduleCode="+KlarnaHub.Config.moduleCode},e=function(n,e){return new Promise((function(r,o){fetch(n,e).then((function(n){if(!n.ok)throw n.json().then(console.error),new Error(n.statusText);return n.json()})).then((function(n){if(n.exception)throw new Error(n);if(n.error_code){var e=[KlarnaHub.Config.lang.KLARNA_COMMUNICATION_FAILED,"<strong>"+KlarnaHub.Config.lang.ERROR+"</strong>:",n.error_messages.join("<br>"),"<strong>"+KlarnaHub.Config.lang.ERROR_CODE+"</strong>:",n.error_code,"<strong>"+KlarnaHub.Config.lang.CORRELATION_ID+"</strong>:",n.correlation_id];KlarnaHub.Lib.showMessage("Klarna",e.join("<br><br>"))}else r(n)})).catch((function(n){KlarnaHub.Lib.handleError(n),o(n)}))}))};window.KlarnaHub=window.KlarnaHub||{},window.KlarnaHub.Api=Object.assign({},{getConfiguration:function(n,r,o){if(!n)throw new Error("App URL argument cannot be empty.");var a=["do=KlarnaHub/GetConfiguration","appUrl="+n];r&&a.push("orderNumber="+r),o&&a.push("moduleCode="+o);var t=n+"admin/admin.php?"+a.join("&");return e(t,{credentials:"include"})},executeFullCapture:function(){var r=n("ExecuteFullCapture");return e(r,{method:"POST",credentials:"include"})},executeCapture:function(r){var o=n("ExecuteCapture"),a={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return e(o,a)},executeAddTrackingCode:function(r,o){var a=n("ExecuteAddTrackingCode"),t={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({shippingCompany:r.trim(),trackingNumber:o.trim()})};return e(a,t)},executeCancelOrder:function(){var r=n("ExecuteCancelOrder");return e(r,{method:"POST",credentials:"include"})},activateRecalculationFlag:function(r,o,a,t){var i=n("ActivateRecalculationFlag"),u={method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({newCouponAmount:parseFloat(r),newDiscountAmount:parseFloat(o),newVoucherAmount:parseFloat(a),newShippingCosts:parseFloat(t)})};return e(i,u)}},window.KlarnaHub.Api)}();