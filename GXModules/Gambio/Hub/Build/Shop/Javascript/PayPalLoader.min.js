"use strict";!function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);document.currentScript;var e=function(){var e;if("boolean"==typeof payPalButtonSettings.developmentMode&&!1!==payPalButtonSettings.developmentMode){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];(e=console).info.apply(e,["PayPalLoader"].concat(n))}},t=function(){if(window.location.search.match(/(\?|&)display_mode=ecs($|&)/)){var e=document.querySelector("div.checkout-buttons");e&&(e.style.display="none");var t=document.querySelector("div.shopping-cart-button a.button-submit");null===t&&(t=document.querySelector("tr.checkout-button")),t&&(t.style.display="none");var n=document.querySelector("div.shopping-cart-button");n&&n.classList.add("paypal-ecs-mode");var a=document.querySelector("div.paypalinstallmentcontainer");a&&(a.style.display="none"),o=document.querySelector("#paypal-button-container"),l=document.querySelector("table.order-total tr.footer.total"),r=document.createElement("tr"),(i=document.createElement("td")).colSpan="2",i.style.width="100%",i.style.borderTop="none",i.appendChild(o),r.appendChild(i),l.parentNode.appendChild(r),l.querySelectorAll("td").forEach((function(e){e.style.paddingBottom="15px"}))}var o,l,r,i},n=function(e,t){if(e.style.width="auto",e.style.textAlign="center",e.style.fontStyle="italic",payPalText.continueToPayPal){var n="-"+window.getComputedStyle(t).lineHeight;e.style.marginTop="calc("+n+" - 3px)";var a=document.createElement("span");a.classList.add("paypal-continue-label"),a.textContent=payPalText.continueToPayPal,a.style.paddingBottom="3px",e.appendChild(a)}},a=function(){var t=document.querySelector("#checkout_payment div.continue_button"),a=t.querySelector('input[type="submit"]'),o=a.style.display,l=(document.createElement("div"),document.querySelector("#gambiohub-ppplus")),r=document.querySelector("div.paypal-cc-form");document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]');if(null===l&&null!==r){e("PayPal: Credit Card form found on page.");var i=paypal.HostedFields.isEligible(),c=document.querySelector("li.gambio_hub-PayPal2Hub-creditcardbutton");if(i)e("PayPal: eligible for hosted fields"),c&&c.remove(),function(){var t=document.querySelector("#ppcc-card-holder-field").closest("label"),n=document.createElement("div");for(n.classList.add("payment-module-container"),t.parentNode.appendChild(n);t.hasChildNodes();)n.appendChild(t.firstChild);t.remove();var a=document.querySelector("li.gambio_hub-PayPal2Hub-creditcard");a.style.cursor="pointer",a.addEventListener("click",(function(){$(this).find("input:radio:not(:disabled):not(.placeholder-radio)").first().prop("checked",!0).trigger("change")}));var o=document.querySelector("#ppcc-card-holder-field"),l=getComputedStyle(o),r=document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]');paypal.HostedFields.render({createOrder:function(){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return r.value=t.id,e("credit card order created: "+t.id,t),t.id}))},styles:{input:{color:l.color,"font-size":l.fontSize,"font-family":l.fontFamily,padding:l.padding,"line-height":l.lineHeight},".valid":{color:"green"},".invalid":{color:"red"}},fields:{number:{selector:"#ppcc-card-number",placeholder:"4111111111111111"},cvv:{selector:"#ppcc-cvv",placeholder:"123"},expirationDate:{selector:"#ppcc-expiration-date",placeholder:"MM/YY"}}}).then((function(t){e("PayPal: CC fields initialized",t);var n=document.querySelector("#checkout_payment"),a=!1;n.addEventListener("submit",(function(o){if(!1===a&&"gambio_hub-PayPal2Hub-creditcard"===n.payment.value){o.preventDefault();var l=JSON.parse(document.querySelector("#ppcc-billingaddress").textContent);t.submit({cardholderName:n.ppcc_card_holder.value,billingAddress:l,contingencies:["SCA_WHEN_REQUIRED"]}).then((function(){e("cardFields submitted"),a=!0,n.submit()})).catch((function(t){r.value="",e(t),alert(payPalText.errorCheckData),document.querySelector('input[name="payment"]:checked').scrollIntoView(!1)}))}}))}))}();else e("PayPal: NOT eligible for hosted fields"),document.querySelector("li.gambio_hub-PayPal2Hub-creditcard").remove()}if(null===l&&!payPalButtonSettings.paymentApproved){var u=t.parentElement.querySelector("div.back_button");if(null!==u&&u.classList.contains("col-xs-6")){u.classList.remove("col-xs-6"),u.classList.add("col-xs-4"),t.classList.remove("col-xs-6"),t.classList.add("col-xs-8");var d=u.querySelector("a.btn");payPalButtonSettings.style.height=parseInt(getComputedStyle(d).height)}var p=function(t){var a=document.createElement("div");return a.id="paypal-button-container",a.style.display="none",n(a,t),t.appendChild(a),paypal.Buttons({fundingSource:"paypal",style:payPalButtonSettings.style,createOrder:function(t,n){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e("order created: "+t.id,t),t.id}))},onApprove:function(e,t){document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]').value=e.orderID,document.querySelector('#checkout_payment input[name="PayPal2HubPayerId"]').value=e.payerID,document.querySelector("#checkout_payment").submit()}}).render("#paypal-button-container"),a}(t),s=function(t){var a=document.querySelector("li.gambio_hub-PayPal2Hub-paylater");if(null===a)return null;var o=paypal.Buttons({fundingSource:"paylater",style:payPalButtonSettings.style,createOrder:function(t,n){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e("order created: "+t.id,t),t.id}))},onApprove:function(e,t){document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]').value=e.orderID,document.querySelector('#checkout_payment input[name="PayPal2HubPayerId"]').value=e.payerID,document.querySelector("#checkout_payment").submit()}});if(o.isEligible()){var l=document.createElement("div");return l.id="paypal-paylater-button-container",l.style.display="none",n(l,t),t.appendChild(l),o.render("#paypal-paylater-button-container"),e("PayPal Paylater: eligible and initialized"),l}return e("PayPal Paylater: not eligible"),a.remove(),null}(t),y=function(t){var a=document.querySelector("li.gambio_hub-PayPal2Hub-creditcardbutton");if(null===a)return null;var o=payPalButtonSettings.style;o.color="black",o.shape="pill";var l=paypal.Buttons({fundingSource:"card",style:o,createOrder:function(t,n){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e("order created: "+t.id,t),t.id}))},onApprove:function(e,t){document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]').value=e.orderID,document.querySelector('#checkout_payment input[name="PayPal2HubPayerId"]').value=e.payerID,document.querySelector("#checkout_payment").submit()}});if(e(l),l.isEligible()){e("Eligible for branded cc payments");var r=document.createElement("div");return r.id="paypal-creditcard-button-container",r.style.display="none",n(r,t),t.appendChild(r),l.render("#paypal-creditcard-button-container"),r}return e("NOT eligible for branded cc payments"),a.remove(),null}(t),m=function(t){var a=document.querySelector("li.gambio_hub-PayPal2Hub-sepa");if(null===a)return null;var o=payPalButtonSettings.style;"gold"!==o.color&&"blue"!==o.color||(o.color="silver");var l=paypal.Buttons({fundingSource:"sepa",style:payPalButtonSettings.style,createOrder:function(t,n){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e("order created: "+t.id,t),t.id}))},onApprove:function(e,t){document.querySelector('#checkout_payment input[name="PayPal2HubOrderId"]').value=e.orderID,document.querySelector('#checkout_payment input[name="PayPal2HubPayerId"]').value=e.payerID,document.querySelector("#checkout_payment").submit()}});if(l.isEligible()){var r=document.createElement("div");return r.id="paypal-sepa-button-container",r.style.display="none",n(r,t),t.appendChild(r),l.render("#paypal-sepa-button-container"),e("PayPal SEPA: eligible and initialized"),r}return e("PayPal SEPA: not eligible"),a.remove(),null}(t),h=function(){var e=this.querySelector('input[name="payment"]');null!==e&&("gambio_hub-PayPal2Hub"===e.value||"gambio_hub"===e.value&&"PayPal2Hub"===e.dataset.module_code?(a.style.display="none",p.style.display="block",null!==s&&(s.style.display="none"),null!==y&&(y.style.display="none"),null!==m&&(m.style.display="none")):"gambio_hub-PayPal2Hub-paylater"===e.value&&null!==s?(a.style.display="none",p.style.display="none",s.style.display="block",null!==y&&(y.style.display="none"),null!==m&&(m.style.display="none")):"gambio_hub-PayPal2Hub-sepa"===e.value&&null!==m?(a.style.display="none",p.style.display="none",null!==s&&(s.style.display="none"),null!==y&&(y.style.display="none"),m.style.display="block"):"gambio_hub-PayPal2Hub-creditcardbutton"===e.value&&null!==y?(a.style.display="none",p.style.display="none",y.style.display="block",null!==s&&(s.style.display="none"),null!==m&&(m.style.display="none")):(a.style.display=o,p.style.display="none",null!==s&&(s.style.display="none"),null!==y&&(y.style.display="none"),null!==m&&(m.style.display="none")))};document.querySelectorAll('#checkout_payment input[name="payment"], #checkout_payment li.list-group-item').forEach((function(e){e.addEventListener("click",h)}));var P=document.querySelectorAll("#checkout_payment li");P.forEach((function(e){(e.querySelector('input[name="payment"]:checked')||1===P.length)&&e.dispatchEvent(new Event("click"))}))}},o=function t(n){e("Initialising PayPal Installments banners","CartAmount = "+payPalBannerSettings.cartAmount),document.querySelectorAll(".paypal-installments").forEach((function(a){var o=a.dataset.ppinstPos;if(e("found banner on position "+o),payPalBannerSettings.positions&&payPalBannerSettings.positions[o]){if(e("settings found for position "+o,payPalBannerSettings.positions[o]),"none"===payPalBannerSettings.positions[o].style.layout)return void e("position disabled: "+o);if(void 0===n&&(n=0),payPalBannerSettings.cartAmount&&(n+=payPalBannerSettings.cartAmount),payPalBannerSettings.productsPrice)n+=payPalBannerSettings.productsPrice;else{var l=document.querySelector("div.current-price-container");if(l){var r=l.innerText;r=r.replace(/.*?[\d,.]+\s+\D{1,3}.*?([\d,.]+\s+\D{1,3})/s,"$1"),n+=.01*parseFloat(r.replace(/.*?(((\d{1,3}[.,])+)(\d{2})).*/,"$1").replace(/[.,]/g,"")),e("Product amount for banner: "+n)}}if(n<99)return void e("Not showing PayPal Installments banner for amount "+n);if(a.classList.contains("paypal-installments-cartbottom")){var i=document.querySelector("div.shopping-cart-button");if(i){var c=document.querySelector("tr.total.sum td:nth-child(2)"),u="0";c?u=c.textContent.trim():(c=document.querySelector("tr.footer.total td:nth-child(2)"))&&(u=c.textContent.trim().replace(/(\n|\t|\.|\,)/g,"").replace(/.*?([0-9.,]+)\s+EUR.*/,"$1")),n=.01*parseInt(u.replace(/[^0-9]/g,"")),e("cart amount "+n),new MutationObserver((function(n,a){n.forEach((function(n){n.removedNodes.length>0&&(e("re-init PayPal installments banner"),t())}))})).observe(i,{childList:!0})}}paypal.Messages({amount:n,currency:payPalBannerSettings.currency,style:payPalBannerSettings.positions[o].style,placement:payPalBannerSettings.positions[o].placement}).render(a).then((function(){var e=document.querySelector(".paypalinstallmentcontainer");e&&e.remove()}))}}))},l=function(){e("PayPalSDK loaded"),window.location.pathname.match(/shopping_cart.php/)&&(e("Initializing ECS button"),function n(a){if(void 0===a&&(a=payPalButtonSettings.cartAmount),e("initJSSDKPayPalButtonECS cart amount: "+a),a<.01)e("ECS: not showing, cart amount too low");else{var l=document.querySelector("#paypal-button-container");if(l){var r=document.querySelector("div.ecs_intro");null!==document.querySelector("tr.checkout-button .button-disabled")?(r&&(r.style.display="none"),l.style.display="none"):(r&&(r.style.display="block"),l.style.display="block",t()),paypal.Buttons({style:payPalButtonSettings.style,createOrder:function(t,n){return fetch(payPalButtonSettings.createOrderUrl,{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){return e("order created: "+t.id,t),t.id}))},onApprove:function(t,n){return e("Approved data:",t),fetch(payPalButtonSettings.approvedOrderUrl+"&orderId="+t.orderID,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e("response data:",t),document.location=payPalButtonSettings.checkoutUrl}))},onError:function(e){var t=document.querySelector("#paypal-button-container"),n=document.querySelector("div.ecs_intro");if(t){var a=document.querySelector("div.paypal-error");a||((a=document.createElement("div")).classList.add("paypal-error"),a.classList.add("alert"),a.classList.add("alert-warning"),a.style.textAlign="left",a.style.color="#555"),a.innerText=payPalText.paypalUnavailable+" ";var o=document.querySelector("div.shopping-cart-button");if(o&&o.classList.contains("paypal-ecs-mode")){var l=window.location.toString().replace("display_mode=ecs","display_mode=normal"),r=document.createElement("a");r.setAttribute("href",l),r.innerText=payPalText.errorContinue,a.append(r)}t.parentNode.append(a),t.style.display="none"}n&&(n.style.display="none")}}).render("#paypal-button-container");var i=document.querySelector("#paypal-button-container");new MutationObserver((function(t,a){t.forEach((function(t){if(t.removedNodes.length>0){e("re-init PayPal buttons");var a=document.querySelector("tr.total.sum td:nth-child(2)");if(a){var l=parseFloat(a.textContent.replace(/[^0-9]/g,""))/100;n(l),o(l)}else n(),o()}}))})).observe(i,{childList:!0})}}}()),window.location.pathname.match(/checkout_payment.php/)&&(e("Initializing PayPal on payment page"),a()),o()},r=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?"none":"block",n=document.querySelector("div#paypal-newbutton");n&&(n.style.display=t);var a=document.querySelector("#checkout_payment li.gambio_hub-PayPal2Hub-creditcard");a&&(a.style.display=t);var o=document.querySelector("#checkout_payment li.gambio_hub-PayPal2Hub-pui");o&&(o.style.display=t);var l=document.querySelector("#checkout_payment li.gambio_hub-PayPal2Hub-paylater");l&&(l.style.display=t);var r=document.querySelector("#checkout_payment li.gambio_hub-PayPal2Hub-sepa");r&&(r.style.display=t);var i=document.querySelector("#checkout_payment li.gambio_hub-PayPal2Hub");if(i&&e){var c=document.createElement("input");c.type="hidden",c.name="PayPalMode",c.value="sdkless",i.appendChild(c)}},i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.querySelectorAll("#checkout_payment li.list-group-item");t.forEach((function(t,n,a){t.classList.forEach((function(n){n.match(/.*PayPal2Hub.*/)&&(e?(t.querySelector('input[name="payment"]').setAttribute("disabled","disabled"),t.style.opacity="0.5"):(t.querySelector('input[name="payment"]').removeAttribute("disabled"),t.style.opacity="1"))}))}))},c=function(){i(!1)},u="fetch"in window?function(){e("readyCallback start");var t="";"undefined"!=typeof payPalButtonSettings&&payPalButtonSettings.jssrc?t=payPalButtonSettings.jssrc:"undefined"!=typeof payPalBannerSettings&&payPalBannerSettings.jssrc&&(t=payPalBannerSettings.jssrc);var n=document.querySelectorAll(".paypal-installments").length>0,a=window.location.pathname.match(/shopping_cart.php/)||window.location.pathname.match(/checkout_payment.php/),o=null,u=document.getElementById("paypalconsent");if(null!==u){o=JSON.parse(u.textContent).purpose_id;var d=document.cookie.split("; ").find((function(e){return e.startsWith("GXConsents=")})),p=d?d.split("=")[1]:null;if(p)JSON.parse(p).purposeConsents[""+o]}if(t&&(n||a)&&void 0===window.paypal){var s=null,y=function(){clearTimeout(s),l(),r(!1),c()},m=function(){e("ERROR loading PayPal Javascript - blocked?"),e("PayPal JSSDK unavailable, disabling features"),r(),c()};window.initPayPalJSSDK=function(){if(void 0===window.paypal){var e=document.createElement("script");e.src=payPalButtonSettings.jssrc?payPalButtonSettings.jssrc:payPalBannerSettings.jssrc;var t=document.querySelector("#paypal_cc_identity");if(null!==t){var n=JSON.parse(t.textContent);void 0!==n.client_token&&(e.dataset.clientToken=n.client_token)}e.onerror=m,e.onload=y,document.currentScript?document.currentScript.parentNode.insertBefore(e,document.currentScript):document.querySelector("script:last-of-type").parentNode.appendChild(e)}},i(),null!==o?(e("External PayPal Javascript is managed by CookieConsent, purpose "+o),window.PayPalAsOilClearToLoad?(e("OIL has cleared PayPal to load"),window.initPayPalJSSDK()):(e("OIL has not yet cleared PayPal to load"),r(),window.addEventListener("PayPalClearedToLoad",(function(t){e("OIL has cleared PayPal to load (Event)"),window.initPayPalJSSDK()})),a&&(e("on checkout page; waiting 5s for OIL"),s=setTimeout(m,5e3)))):(console.info("Not using CookieConsent integration for PayPal, loading directly"),window.initPayPalJSSDK())}else e("PayPal JSSDK unavailable or not required, disabling features"),r();e("readyCallback end")}:function(){e("Sorry, antique browser not supported.");var t=document.querySelector("li.gambio_hub-PayPal2Hub");t&&t.remove()};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?(e("Readystate complete"),u()):(e("Adding EventListener for DOMContentLoaded"),document.addEventListener("DOMContentLoaded",u))}();