"use strict";jse.libs.storage=jse.libs.storage||{},function(e){var s=void 0!==Storage,r=function(e,r,o,t,a){var n=null,i=null;return!!s&&(n=(n=e.getItem("user_"+a))||"{}",n=$.parseJSON(n),r||void 0===n[o]?n[o]=t:n[o]=$.extend({},n[o],t),i=JSON.stringify(n),e.setItem("user_"+a,i),!0)},o=function(e,r,o){var t=null;return s?(t=(t=e.getItem("user_"+o))||"{}",(t=$.parseJSON(t))[r]||{}):{}};e.store=function(e,s,o){var t=$("body").data().userId,a={},n=[];return $.each(e,(function(e,i){var l=$.Deferred();switch(n.push(l),e){case"session":a.session=r(sessionStorage,o,i,s,t),l.resolve(a);break;case"local":a.local=r(localStorage,o,i,s,t),l.resolve(a)}})),$.when.apply(void 0,n).promise()},e.restore=function(e){var s=$("body").data().userId,r={},t=[];return $.each(e,(function(e,a){var n=$.Deferred();switch(t.push(n),e){case"session":r.session=o(sessionStorage,a,s),n.resolve(r);break;case"local":r.local=o(localStorage,a,s),n.resolve(r)}})),$.when.apply(void 0,t).then((function(e){return $.extend(!0,{},e.local||{},e.session||{},e.server||{})})).promise()}}(jse.libs.storage);