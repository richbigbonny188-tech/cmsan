/**
 * @license Hyphenopoly 2.8.0 - client side hyphenation for webbrowsers
 * ©2019 Mathias Nater, Zürich (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
!function(e){"use strict";const n=Hyphenopoly,t=String.fromCharCode(173);function r(){return Object.create(null)}function a(e,n){return{configurable:(4&n)>0,enumerable:(2&n)>0,writable:(1&n)>0,value:e}}Math.imul=Math.imul||function(e,n){const t=65535&e,r=65535&n;return t*r+((e>>>16&65535)*r+t*(n>>>16&65535)<<16>>>0)|0},function(){const e=Object.create(null,{defaultLanguage:a("en-us",2),dontHyphenate:a(function(){const e=r();return"abbr,acronym,audio,br,button,code,img,input,kbd,label,math,option,pre,samp,script,style,sub,sup,svg,textarea,var,video".split(",").forEach(function(n){e[n]=!0}),e}(),2),dontHyphenateClass:a("donthyphenate",2),exceptions:a(r(),2),normalize:a(!1,2),safeCopy:a(!0,2),timeout:a(1e3,2)}),o=Object.create(e),i=Object.create(null,{compound:a("hyphen",2),hyphen:a(t,2),leftmin:a(0,2),leftminPerLang:a(0,2),minWordLength:a(6,2),orphanControl:a(1,2),rightmin:a(0,2),rightminPerLang:a(0,2)});Object.keys(n.setup).forEach(function(t){if("selectors"===t){const e=Object.keys(n.setup.selectors);Object.defineProperty(o,"selectors",a(e,2)),e.forEach(function(e){const t=r();Object.keys(n.setup.selectors[e]).forEach(function(r){t[r]=a(n.setup.selectors[e][r],2)}),Object.defineProperty(o,e,a(Object.create(i,t),2))})}else if("dontHyphenate"===t){const i=r();Object.keys(n.setup.dontHyphenate).forEach(function(e){i[e]=a(n.setup.dontHyphenate[e],2)}),Object.defineProperty(o,t,a(Object.create(e.dontHyphenate,i),3))}else Object.defineProperty(o,t,a(n.setup[t],3))}),n.c=o}(),function(){const o=n.c;let i=null,c=null;function s(e,n){try{return e.getAttribute("lang")?e.getAttribute("lang").toLowerCase():"html"===e.tagName.toLowerCase()?n?i:null:s(e.parentNode,n)}catch(e){return null}}function l(){c=function(){const e=new Map,n=[0];return{add:function(t,r,a){const o={element:t,selector:a};return e.has(r)||e.set(r,[]),e.get(r).push(o),n[0]+=1,o},counter:n,each:function(n){e.forEach(function(e,t){n(t,e)})},list:e}}();const r=function(){let e="."+n.c.dontHyphenateClass,t=null;for(t in o.dontHyphenate)o.dontHyphenate[t]&&(e+=", "+t);return e}(),a=o.selectors.join(", ")+", "+r;function i(e,r,l,u){u=u||!1;const f=function(e,n){return e.lang&&"string"==typeof e.lang?e.lang.toLowerCase():n&&""!==n?n.toLowerCase():s(e,!0)}(e,r);"H9Y"===n.clientFeat.langs[f]?(c.add(e,f,l),!u&&o.safeCopy&&function(e){e.addEventListener("copy",function(e){e.preventDefault();const n=window.getSelection().toString();e.clipboardData.setData("text/plain",n.replace(new RegExp(t,"g"),""))},!0)}(e)):n.clientFeat.langs[f]||n.events.dispatch("error",{lvl:"warn",msg:"Element with '"+f+"' found, but '"+f+".hpb' not loaded. Check language tags!"});const h=e.childNodes;Array.prototype.forEach.call(h,function(e){1!==e.nodeType||function(e,n){return e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.matches(n)}(e,a)||i(e,f,l,!0)})}o.selectors.forEach(function(n){const t=e.document.querySelectorAll(n);Array.prototype.forEach.call(t,function(e){i(e,s(e,!0),n,!1)})}),n.elementsReady=!0}const u=new Map;function f(e,t,r){const a=o[r],i=a.hyphen;function c(o){let c=e.cache.get(r).get(o);return c||(e.exceptions.has(o)?c=e.exceptions.get(o).replace(/-/g,a.hyphen):-1===o.indexOf("-")?o.length>61?(n.events.dispatch("error",{lvl:"warn",msg:"found word longer than 61 characters"}),c=o):c=e.hyphenateFunction(o,i,a.leftminPerLang[t],a.rightminPerLang[t]):c=function(n){const o=String.fromCharCode(8203);let i=null,c=null,s=n;return"auto"===a.compound||"all"===a.compound?(c=f(e,t,r),i=n.split("-").map(function(e){return e.length>=a.minWordLength?c(e):e}),s="auto"===a.compound?i.join("-"):i.join("-"+o)):s=n.replace("-","-"+o),s}(o),e.cache.get(r).set(o,c)),c}return e.cache.set(r,new Map),u.set(t+"-"+r,c),c}const h=new Map;function p(e,t,r){const a=n.languages.get(e),i=o[t],s=i.minWordLength,l=o.normalize&&Boolean(String.prototype.normalize),p=e+"-"+t,g=u.has(p)?u.get(p):f(a,e,t),d=h.has(t)?h.get(t):function(e){function n(n,t,r,a){const i=o[e];let c=i.hyphen;return-1!==".\\+*?[^]$(){}=!<>|:-".indexOf(i.hyphen)&&(c="\\"+i.hyphen),3===i.orphanControl&&" "===t&&(t=String.fromCharCode(160)),t+r.replace(new RegExp(c,"g"),"")+a}return h.set(e,n),n}(t),m=a.genRegExps.get(t);function y(e){let n=null;return n=l?e.normalize("NFC").replace(m,g):e.replace(m,g),1!==i.orphanControl&&(n=n.replace(/(\u0020*)(\S+)(\s*)$/,d)),n}let b=null;return"string"==typeof r?b=y(r):r instanceof HTMLElement&&function(t){n.events.dispatch("beforeElementHyphenation",{el:t,lang:e});const r=t.childNodes;Array.prototype.forEach.call(r,function(e){3===e.nodeType&&e.data.length>=s&&(e.data=y(e.data))}),c.counter[0]-=1,n.events.dispatch("afterElementHyphenation",{el:t,lang:e})}(r),b}function g(e,t){t?t.forEach(function(n){p(e,n.selector,n.element)}):n.events.dispatch("error",{lvl:"warn",msg:"engine for language '"+e+"' loaded, but no elements found."}),0===c.counter[0]&&n.events.dispatch("hyphenopolyEnd")}function d(e,t,i,c,s){i=i.replace(/-/g,"");const l=function(e){return n.languages||(n.languages=new Map),n.languages.has(e)||n.languages.set(e,r()),n.languages.get(e)}(e);l.engineReady||(l.cache=new Map,n.c.exceptions.global&&(n.c.exceptions[e]?n.c.exceptions[e]+=", "+n.c.exceptions.global:n.c.exceptions[e]=n.c.exceptions.global),n.c.exceptions[e]?(l.exceptions=function(e){const n=new Map;return e.split(", ").forEach(function(e){const t=e.replace(/-/g,"");n.set(t,e)}),n}(n.c.exceptions[e]),delete n.c.exceptions[e]):l.exceptions=new Map,l.genRegExps=new Map,l.leftmin=c,l.rightmin=s,l.hyphenateFunction=t,o.selectors.forEach(function(n){const t=o[n];0===t.leftminPerLang&&Object.defineProperty(t,"leftminPerLang",a(r(),2)),0===t.rightminPerLang&&Object.defineProperty(t,"rightminPerLang",a(r(),2)),t.leftminPerLang[e]?t.leftminPerLang[e]=Math.max(l.leftmin,t.leftmin,t.leftminPerLang[e]):t.leftminPerLang[e]=Math.max(l.leftmin,t.leftmin),t.rightminPerLang[e]?t.rightminPerLang[e]=Math.max(l.rightmin,t.rightmin,t.rightminPerLang[e]):t.rightminPerLang[e]=Math.max(l.rightmin,t.rightmin),l.genRegExps.set(n,new RegExp("[\\w"+i+String.fromCharCode(8204)+"-]{"+t.minWordLength+",}","gi"))}),l.engineReady=!0),Hyphenopoly.events.dispatch("engineReady",{msg:e})}function m(e){if(n.clientFeat.wasm)return 65536*Math.ceil(e/65536);const t=Math.ceil(Math.log2(e));return t<=12?4096:t<24?1<<t:Math.ceil(e/(1<<24))*(1<<24)}n.createHyphenator=function(e){return function(n,t){return p(e,t=t||".hyphenate",n)}},n.unhyphenate=function(){c.each(function(e,n){n.forEach(function(e){const n=e.element.firstChild,t=o[e.selector].hyphen;n.data=n.data.replace(new RegExp(t,"g"),"")})})};const y=function(){let e=null;if(window.TextDecoder){const n=new TextDecoder("utf-16le");e=function(e){return n.decode(e)}}else e=function(e){return String.fromCharCode.apply(null,e)};return e}();function b(e){const n=new Uint32Array(e).subarray(0,8),t=n[7],r=1280+t+(4-(1280+t)%4),a=r+4*n[6];return{heapSize:Math.max(m(a+576+n[2]+n[3]),2097152),hpbOffset:a+576,hpbPatternsOffset:a+576+n[2],hpbTranslateOffset:a+576+n[1],hyphenatedWordOffset:a+320,hyphenPointsOffset:a+256,leftmin:n[4],patternsLength:n[3],patternTrieOffset:r,rightmin:n[5],translatedWordOffset:a+128,valueStoreOffset:1280,wordOffset:a}}function w(e,t){const r=n.clientFeat.wasm?e.wasmMemory.buffer:e.heapBuffer,a=e.wordOffset,o=e.hyphenatedWordOffset,i=new Uint16Array(r).subarray(a>>1,64+(a>>1)),c=e.leftmin,s=e.rightmin,l=new Uint16Array(r).subarray(o>>1,128+(o>>1));return function(e,n,r,a){let o=0;const u=e.length;for(r=r||c,a=a||s,i[0]=u+2,i[1]=95;o<u;)i[o+2]=e.charCodeAt(o),o+=1;return i[o+2]=95,1===t(r,a)&&(e=y(l.subarray(1,l[0]+1)),"­"!==n&&(e=e.replace(/\u00AD/g,n))),e}}function v(e){Promise.all([n.binaries.get(e),n.binaries.get("hyphenEngine")]).then(function(t){const r=t[0],a=b(r),o=t[1],i=n.specMems.get(e),c=i.buffer.byteLength>=a.heapSize?i:new WebAssembly.Memory({initial:a.heapSize/65536,maximum:256});new Uint32Array(c.buffer).set(new Uint32Array(r),a.hpbOffset>>2),a.wasmMemory=c,WebAssembly.instantiate(o,{env:{memory:a.wasmMemory,memoryBase:0},ext:a}).then(function(n){const t=n.exports.convert();d(e,w(a,n.exports.hyphenate),y(new Uint16Array(c.buffer).subarray(385,384+t)),a.leftmin,a.rightmin)})})}function x(e){const t=n.binaries.get(e),r=b(t),a=n.specMems.get(e),o=a.byteLength>=r.heapSize?a:new ArrayBuffer(r.heapSize),i=new Uint8Array(o),c=new Uint8Array(t);i.set(c,r.hpbOffset),r.heapBuffer=o;const s=asmHyphenEngine({Int32Array:window.Int32Array,Math:Math,Uint16Array:window.Uint16Array,Uint8Array:window.Uint8Array},r,r.heapBuffer),l=s.convert();d(e,w(r,s.hyphenate),y(new Uint16Array(o).subarray(385,384+l)),r.leftmin,r.rightmin)}let E=null;const L=[];function O(e,n){"*"===e?("wasm"===n?E=v:"asm"===n&&(E=x),L.forEach(function(e){E(e)})):E?E(e):L.push(e)}n.events.define("contentLoaded",function(){!function(){const n=e.document.getElementsByTagName("html")[0];(i=s(n,!1))||""===o.defaultLanguage||(i=o.defaultLanguage)}(),l(),n.events.dispatch("elementsReady")},!1),n.events.define("elementsReady",function(){c.each(function(e,t){n.languages&&n.languages.has(e)&&n.languages.get(e).engineReady&&g(e,t)})},!1),n.events.define("engineLoaded",function(e){O("*",e.msg)},!1),n.events.define("hpbLoaded",function(e){O(e.msg,"*")},!1),n.events.define("engineReady",function(e){n.elementsReady&&g(e.msg,c.list.get(e.msg))},!1),n.events.define("hyphenopolyStart",null,!0),n.events.define("hyphenopolyEnd",function(){e.clearTimeout(o.timeOutHandler),"none"!==n.c.hide&&n.toggle("on")},!1),n.events.define("beforeElementHyphenation",null,!0),n.events.define("afterElementHyphenation",null,!0),n.events.tempRegister.forEach(function(e){n.events.addListener(e.name,e.handler,!1)}),delete n.events.tempRegister,n.events.dispatch("hyphenopolyStart",{msg:"Hyphenopoly started"}),e.clearTimeout(n.c.timeOutHandler),Object.defineProperty(o,"timeOutHandler",a(e.setTimeout(function(){n.events.dispatch("timeout",{delay:o.timeout})},o.timeout),2)),n.events.deferred.forEach(function(e){n.events.dispatch(e.name,e.data)}),delete n.events.deferred}()}(window);