!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,o=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),n=o&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),a=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,r=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,i=(o||a)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,i,l,u,c,b,f,B,s=t.match(r);if(!s)throw new Error("invalid data URI");for(e=s[2]?s[1]:"text/plain"+(s[3]||";charset=US-ASCII"),i=!!s[4],l=t.slice(s[0].length),u=(i?atob:decodeURIComponent)(l),c=new ArrayBuffer(u.length),b=new Uint8Array(c),f=0;f<u.length;f+=1)b[f]=u.charCodeAt(f);return o?new Blob([n?b:c],{type:e}):((B=new a).append(c),B.getBlob(e))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,o,n){var a=this;setTimeout((function(){n&&e.toDataURL&&i?t(i(a.toDataURL(o,n))):t(a.mozGetAsFile("blob",o))}))}:e.toDataURL&&i&&(e.msToBlob?e.toBlob=function(t,o,n){var a=this;setTimeout((function(){(o&&"image/png"!==o||n)&&e.toDataURL&&i?t(i(a.toDataURL(o,n))):t(a.msToBlob(o))}))}:e.toBlob=function(t,e,o){var n=this;setTimeout((function(){t(i(n.toDataURL(e,o)))}))})),"function"==typeof define&&define.amd?define((function(){return i})):"object"==typeof module&&module.exports?module.exports=i:t.dataURLtoBlob=i}(window);