"use strict";jse.extensions.module("validator",["fallback"],(function(e){var t=$(this),a={required:function(e,t,a,r){switch(a){case"select":case"checkbox":return-1!==parseInt(t,10);case"radio":return!1;default:return!!t}},email:function(e,t,a,r){if(""===t&&-1===r.validate.indexOf("required"))return e.removeClass("error valid"),null;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},ckeditor:function(e,t,a,r){var i=e.attr("id");if(void 0===i)throw"Cannot validate CKEditor for element without id attribute.";return""!==CKEDITOR.instances[i].getData()}},r=($.extend(!0,{},{},e),{}),i=function(e,t){switch(t){case"valid":e.removeClass("error").addClass("valid");break;case"error":e.removeClass("valid").addClass("error");break;default:e.removeClass("valid error")}},n=function(){var e=$(this),t=jse.libs.fallback._data(e,"validator"),r=t.validate?t.validate.split(" "):[],n=e.prop("tagName").toLowerCase(),l=!0;return n="input"!==n?n:e.attr("type").toLowerCase(),$.each(r,(function(r,o){var d=a[o](e,e.val(),n,t);null!==d&&(i(e,d?"valid":"error"),l=!!l&&d)})),l},l=function(e,a){e&&(e.preventDefault(),e.stopPropagation());var r=e?$(e.target):t,i=!0;return r.filter(".validate").add(r.find(".validate")).each((function(){var e=n.call($(this));i=!!i&&e})),a&&a.deferred&&(i?a.deferred.resolve():a.deferred.reject()),i},o=function(){t.filter(".validate").add(t.find(".validate")).each((function(){i($(this),"reset")}))};return r.init=function(e){t.on("change",".validate:text:visible",n).on("validator.validate",l).on("validator.reset",o).on("submit",(function(e){l()||e.preventDefault()})),e()},r}));