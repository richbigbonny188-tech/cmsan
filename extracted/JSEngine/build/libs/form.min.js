"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};jse.libs.form=jse.libs.form||{},function(e){e.createOptions=function(e,t,a,n){var o=[];t=n?t.sort((function(e,t){return(e=e.name.toLowerCase())<(t=t.name.toLowerCase())?-1:1})):t,a&&o.push($('<option value="-1"> </option>')),$.each(t,(function(e,t){var a=String(t.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),n=String(t.name).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),r=$('<option value="'+a+'">'+n+"</option>");r.data("data",t),o.push(r)})),e.append(o)},e.prefillForm=function(e,t,a){$.each(t,(function(t,n){var o=e.find('[name="'+t+'"]'),r=null;if(o.length){switch(r="input"!==(r=o.prop("tagName").toLowerCase())?r:o.attr("type").toLowerCase()){case"select":"object"===(void 0===n?"undefined":_typeof(n))?$.each(n,(function(e,t){o.find('option[value="'+t+'"]').prop("selected",!0)})):o.find('option[value="'+n+'"]').prop("selected",!0);break;case"checkbox":o.prop("checked","false"!==n);break;case"radio":o.prop("checked",!1),o.each((function(){var e=$(this);e.val()===n.toString()&&e.prop("checked",!0)}));break;case"textarea":default:o.val(n)}a&&o.trigger("change",[])}}))},e.getData=function(e,t,a){var n=e.find("input, textarea, select"),o={};return t&&(n=n.filter(":not("+t+")")),n.each((function(){var e=$(this),t=e.prop("tagName").toLowerCase(),r=e.attr("name"),c=new RegExp(/\[(.*?)\]/g),l=c.exec(r),i=5,p=null,s=null,u=null,f=null;if(t="input"!==t?t:e.attr("type").toLowerCase(),null!==l){var h=r.substring(0,r.search("\\[")),d=[];o[h]=o[h]||(a?{}:[]),u=o[h];do{d.push(l[1]),l=c.exec(r),i-=1}while(null!==l||i<=0);$.each(d,(function(e,n){n=n||"0","string"==typeof d[e+1]?(u[n]=u[n]||(a?{}:[]),u=u[n]):"radio"!==t&&(n=n&&"0"!==n?n:a?Object.keys(u).length:u.length,u[n]=u[n]||void 0),f=n}))}switch(t){case"radio":s=n.filter('input[name="'+e.attr("name")+'"]:checked').val();break;case"checkbox":s=!!e.prop("checked")&&e.val();break;case"select":(p=e.find(":selected")).length>1?(s=[],p.each((function(){s.push($(this).val())}))):s=p.val();break;case"button":break;default:r&&(s=e.val())}null!==u?u[f]=s:o[r]=s})),o},e.getFieldType=function(e){var t=e.prop("tagName").toLowerCase();return"input"!==t?t:e.attr("type").toLowerCase()},e.addHiddenByUrl=function(t,a){var n,o,r,c,l,i,p=(n=null,r=(n=decodeURIComponent(n||location.href)).split("?"),c=r.length>1?r[1].split("&"):[],l=new RegExp(/\[(.*?)\]/g),i={},$.each(c,(function(e,t){var a=t.split("="),n=l.exec(a[0]),r=null,c=a[0].substring(0,a[0].search("\\[")),p=[],s=null;if(o&&null!==n){i[c]=i[c]||[],r=i[c];do{p.push(n[1]),n=l.exec(a[0])}while(null!==n);$.each(p,(function(e,t){t=t||"0","string"==typeof p[e+1]?(r[t]=r[t]||[],r=r[t]):(r[t]=r[t]||void 0,s=t)})),null!==s?r[s]=a[1]:r=a[1]}else i[a[0]]=a[1].split("#")[0]})),i),s="",u=[];$.each(p,(function(e,a){a&&(0===t.find('[name="'+e+'"]').length?s+='<input type="hidden" name="'+e+'" value="'+a+'" />':u.push(e,a))})),a&&e.prefillForm(t,u),t.prepend(s)},e.reset=function(t){t.find("select, input, textarea").each((function(){var a=$(this);switch(e.getFieldType(a)){case"radio":t.find('input[name="'+a.attr("name")+'"]:checked').prop("checked",!1).first().prop("checked",!0);break;case"checkbox":a.prop("checked",!1);break;case"select":a.children().first().prop("selected",!0);break;case"textarea":case"text":a.val("")}}))}}(jse.libs.form);