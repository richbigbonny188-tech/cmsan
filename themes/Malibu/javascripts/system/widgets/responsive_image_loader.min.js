"use strict";gambio.widgets.module("responsive_image_loader",[gambio.source+"/libs/events",gambio.source+"/libs/responsive"],(function(t){var e=$(this),a=$.extend(!0,{},{breakpoints:["xs","sm","md","lg"]},t),i={},n=function(t){var e=$(this);jse.libs.theme.responsive.breakpoint();(t&&t.length?t:e.filter(":attr(^data-image)").add(e.find(":attr(^data-image)"))).not(".lazyLoading").each((function(){for(var t=$(this),e=jse.libs.theme.responsive.breakpoint(),i=a.breakpoints.indexOf(e.name),n=a.breakpoints.length,r=null;i<n;i+=1){var o="data-image-"+a.breakpoints[i],s=t.attr(o);if(s){r=s;break}}r||(r=t.attr("data-image")),r&&t.attr("src")!==r&&t.attr("src",r)}))};return i.init=function(t){var a,i,r;void 0===$.expr.pseudos.attr&&($.expr.pseudos.attr=$.expr.createPseudo((function(t){var e=new RegExp(t);return function(t){for(var a=0;a<t.attributes.length;a++){var i=t.attributes[a];if(e.test(i.name))return!0}return!1}}))),a=e.filter(".lazyLoading:attr(^data-image)").add(e.find(".lazyLoading:attr(^data-image)")),i=function(){var t=$(window).width(),e=$(window).height(),i=$(window).scrollTop(),n=$(window).scrollLeft();a.each((function(){var r=$(this),o=r.offset();(o.top<i+e||o.left<n+t)&&(a=a.not(r),r.trigger("lazyLoadImage"))}))},r=function(t){t.stopPropagation();var e=$(this);e.removeClass("lazyLoading"),n(e)},a.each((function(){$(this).one("lazyLoadImage",r)})),$(window).on("scroll windowWasResized",i),i(),$(window).on(jse.libs.theme.events.BREAKPOINT(),(function(){n.call(e)})),n.call(e),t()},i}));