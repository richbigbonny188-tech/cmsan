"use strict";gambio.widgets.module("zones_handler",["form","xhr"],(function(e){var t=$(this),o=$("select#state.form-control"),n=$("input[name=selected_zone_id]"),a=$("select#state.form-control").closest("div.form-group"),s=$.extend(!0,{},{loadStates:"shop.php?do=Zones",country:"select#country.form-control"},e),d={},i=function(){var e=jse.libs.form.getData(t);jse.libs.xhr.ajax({url:s.loadStates,data:e},!0).done((function(e){e.success?(o.children("option").remove(),n.prop("disabled",!1),o.prop("disabled",!1),$.each(e.data,(function(e,t){t.selected?o.append($("<option selected/>").val(t.id).text(t.name)):o.append($("<option />").val(t.id).text(t.name))})),a.removeClass("hidden").show()):(a.hide(),n.prop("disabled",!0),o.prop("disabled",!0))})).always((function(){r(!1)}))},r=function(e){var t=$('form#account_edit button[type="submit"].btn');t.length&&(t.get(0).disabled=e)};return d.init=function(e){i(),t.on("change",s.country,i),e()},d}));