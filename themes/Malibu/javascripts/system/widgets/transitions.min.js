"use strict";gambio.widgets.module("transitions",[gambio.source+"/libs/events"],(function(t){var i=$(this),s=[],n=$.extend(!0,{},{duration:.5,open:!0,classClose:"",classOpen:""},t),e={},a=function(t,i){var e,a,o,r,d=$(t.target),l=d.clone(),u=$.extend({},d.data().transition||{},i),c=u.open?u.classClose:u.classOpen,v=u.open?u.classOpen:u.classClose;u.uid=u.uid||parseInt(1e5*Math.random(),10),c=c||"",v=v||"",s[u.uid]&&clearTimeout(s[u.uid]),l.appendTo(d.parent()),l.css({visibility:"hidden",display:"initial"}),e=l.outerHeight(),a=l.outerWidth(),d.removeAttr("style").removeClass("transition "+c).addClass(v),o=d.outerHeight(),r=d.outerWidth(),u.calcHeight?d.removeClass(v).css({height:e+"px",width:a+"px",visibility:"initial",display:"initial"}).addClass("transition "+v).css({height:o+"px",width:r+"px"}):d.removeClass(v).addClass("transition "+v);var m=function(t){var i=n.duration;return t.add(t.children()).each((function(){var s=void 0!==t.css("transition-duration")?t.css("transition-duration"):void 0!==t.css("-webkit-transtion-duration")?t.css("-webkit-transtion-duration"):void 0!==t.css("-moz-transtion-duration")?t.css("-moz-transtion-duration"):void 0!==t.css("-ms-transtion-duration")?t.css("-ms-transtion-duration"):void 0!==t.css("-o-transtion-duration")?t.css("-o-transtion-duration"):-1;if(s>=0)return i=s,!1})),i=Math.round(1e3*parseFloat(i))}(d);s[u.uid]=setTimeout((function(){d.removeAttr("style").removeClass("transition").removeData("transition").triggerHandler(jse.libs.theme.events.TRANSITION_FINISHED())}),m),d.data("transition",u),l.remove()},o=function(){var t=$(this),i=t.data("transition")||{};$.isEmptyObject(i)||(s[i.uid]=s[i.uid]?clearTimeout(s[i.uid]):null,t.removeAttr("style").removeClass("transition").removeData("transition").triggerHandler(jse.libs.theme.events.TRANSITION_FINISHED()))};return e.init=function(t){i.on(jse.libs.theme.events.TRANSITION(),a).on(jse.libs.theme.events.TRANSITION_STOP(),o),t()},e}));