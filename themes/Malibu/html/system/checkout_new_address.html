{load_language_text section="address_book_process"}
{load_language_text section="checkout_new_address" name="new_address"}
{load_language_text section="create_account" name="account"}

{block name="checkout_new_address"}
	<fieldset data-gambio-widget="zones_handler">
		{block name="checkout_new_address_legend"}
			<legend>
				{$new_address.title_new_address}
			</legend>
		{/block}
		
		{block name="checkout_new_address_alert"}
			{include file="get_usermod:{$tpl_path}alert_message.html" message=$new_address.text_new_address type="info"}
		{/block}
		
		{block name="checkout_new_address_gender_if"}
			{if $gender == '1'}
				{block name="checkout_new_address_gender"}
					<div class="form-group{if $form_data.gender.required == '1'} mandatory{/if}{if $error_gender} has-error{/if}">
						{block name="checkout_new_address_gender_label"}
							<label class="col-sm-3 control-label">
								{$txt.label_gender}
							</label>
						{/block}
						
						{block name="checkout_new_address_gender_container"}
							<div class="col-sm-9 col-lg-6">
								<span class="radio-inline">
									{block name="checkout_new_address_gender_container_m_label"}
										<label for="{$form_data.gender.name}-m">
											{block name="checkout_new_address_gender_container_m_input"}
												<input type="radio" id="{$form_data.gender.name}-m"  name="{$form_data.gender.name}" value="{$form_data.gender.m.value}"{if $form_data.gender.m.checked} checked{/if}/>
													{$txt.gender_male}
											{/block}
										</label>
									{/block}
								</span>
								<span class="radio-inline">
									<span class="">
										&nbsp;
									</span>
									{block name="checkout_new_address_gender_container_f_label"}
										<label for="{$form_data.gender.name}-f">
											{block name="checkout_new_address_gender_container_f_input"}
												<input type="radio" id="{$form_data.gender.name}-f" name="{$form_data.gender.name}" value="{$form_data.gender.f.value}"{if $form_data.gender.f.checked} checked{/if}/>
												{$txt.gender_female}
											{/block}
										</label>
									{/block}
								</span>
								<span class="radio-inline">
									<span class="">
										&nbsp;
									</span>
									{block name="checkout_new_address_gender_container_o_label"}
										<label for="{$form_data.gender.name}-o">
											{block name="checkout_new_address_gender_container_o_input"}
												<input type="radio" id="{$form_data.gender.name}-o" name="{$form_data.gender.name}" value="{$form_data.gender.o.value}"{if $form_data.gender.o.checked} checked{/if}/>
												{$txt.gender_other}
											{/block}
										</label>
									{/block}
								</span>
							</div>
						{/block}
				
						{if $error_gender}
							{block name="checkout_new_address_gender_error"}
								<div class="help-block">
									<span class="col-sm-3">
										&nbsp;
									</span>
									<span class="col-sm-9 help-block">
										{$error_gender}
									</span>
								</div>
							{/block}
						{/if}
					</div>
				{/block}
			{/if}
		{/block}
		
		{block name="checkout_new_address_firstname"}
			<div class="form-group{if $form_data.firstname.required == '1'} mandatory{/if}{if $error_first_name} has-feedback has-error{/if}">
				{block name="checkout_new_address_firstname_label"}
					<label for="{$form_data.firstname.name}" class="control-label col-sm-3">
						{$txt.label_firstname}
					</label>
				{/block}
				
				{block name="checkout_new_address_firstname_container"}
					<div class="col-sm-9 col-lg-6 input-container">
						{block name="checkout_new_address_firstname_input"}
							<input type="text" placeholder="{$txt.label_firstname}" id="{$form_data.firstname.name}" name="{$form_data.firstname.name}" class="form-control" value="{$form_data.firstname.value}" />
						{/block}
						
						{if $error_first_name}
							{block name="checkout_new_address_firstname_error"}
								<span class="help-block">
									{$error_first_name}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_lastname"}
			<div class="form-group{if $form_data.lastname.required == '1'} mandatory{/if}{if $error_last_name} has-feedback has-error{/if}">
				{block name="checkout_new_address_lastname_label"}
					<label for="{$form_data.lastname.name}" class="control-label col-sm-3">
						{$txt.label_lastname}
					</label>
				{/block}
				
				{block name="checkout_new_address_lastname_container"}
					<div class="col-sm-9 col-lg-6 input-container">
						{block name="checkout_new_address_lastname_input"}
							<input type="text" placeholder="{$txt.label_lastname}" id="{$form_data.lastname.name}" name="{$form_data.lastname.name}" class="form-control" value="{$form_data.lastname.value}" />
						{/block}
						
						{if $error_last_name}
							{block name="checkout_new_address_lastname_error"}
								<span class="help-block">
									{$error_last_name}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_company_if"}
			{if $company=='1'}
				{block name="checkout_new_address_company"}
					<div class="form-group{if $form_data.company.required == '1'} mandatory{/if}{if $error_company} has-feedback has-error{/if}">
						{block name="checkout_new_address_company_label"}
							<label for="{$form_data.company.name}" class="control-label col-sm-3">
								{$txt.label_company}
							</label>
						{/block}
						
						{block name="checkout_new_address_container"}
							<div class="col-sm-9 col-lg-6 input-container">
								{block name="checkout_new_address_company_input"}
									<input type="text" placeholder="{$txt.label_company}" id="{$form_data.company.name}" name="{$form_data.company.name}" class="form-control" value="{$form_data.company.value}" />
								{/block}
								
								{if $error_company}
									{block name="checkout_new_address_company_error"}
										<span class="help-block">
											{$error_company}
										</span>
									{/block}
								{/if}
							</div>
						{/block}
					</div>
				{/block}
			{/if}
		{/block}
		
		{block name="checkout_new_address_address"}
			<div class="form-group{if $form_data.street_address.required == '1' || $form_data.house_number.required == '1'} mandatory{/if}">
				{block name="checkout_new_address_address_label_if"}
					{if $split_street_information == '1'}
						{block name="checkout_new_address_address_split_label"}
							<div {if $error_street || $error_house_number}class="has-feedback has-error"{/if}>
								<label for="{$form_data.street_address.name}" class="control-label col-sm-3">
									{$txt.label_street_number}
								</label>
							</div>
						{/block}
			
						{block name="checkout_new_address_address_split_container1"}
							<div class="col-sm-6 col-lg-4 input-container {if $error_street} has-feedback has-error{/if}">
								{block name="checkout_new_address_address_split_street_input"}
									<input type="text"
										   placeholder="{$txt.label_street}"
										   id="{$form_data.street_address.name}"
										   name="{$form_data.street_address.name}"
										   class="form-control"
										   value="{$form_data.street_address.value}" />
								{/block}
				
								{if $error_street}
									{block name="checkout_new_address_address_split_street_error"}
										<span class="help-block">{$error_street}</span>
									{/block}
								{/if}
							</div>
						{/block}
			
						{block name="checkout_new_address_address_split_container2"}
							<div class="col-sm-3 col-lg-2 input-container {if $error_house_number} has-feedback has-error{/if}">
								{block name="checkout_new_address_address_split_housenr_input"}
									<input type="text"
										   placeholder="{$txt.label_house_number}"
										   id="{$form_data.house_number.name}"
										   name="{$form_data.house_number.name}"
										   class="form-control"
										   value="{$form_data.house_number.value}" />
								{/block}
				
								{if $error_house_number}
									{block name="checkout_new_address_address_split_housenr_error"}
										<span class="help-block">{$error_house_number}</span>
									{/block}
								{/if}
							</div>
						{/block}
					{else}
						{block name="checkout_new_address_address_label"}
							<div {if $error_street}class="has-feedback has-error"{/if}>
								<label for="{$form_data.street_address.name}" class="control-label col-sm-3">
									{$txt.label_street_number}
								</label>
							</div>
						{/block}
			
						{block name="checkout_new_address_address_container"}
							<div class="col-sm-9 col-lg-6 input-container {if $error_street} has-feedback has-error{/if}">
								{block name="checkout_new_address_address_input"}
									<input type="text"
										   placeholder="{$txt.label_street_number}"
										   id="{$form_data.street_address.name}"
										   name="{$form_data.street_address.name}"
										   class="form-control"
										   value="{$form_data.street_address.value}" />
								{/block}
				
								{if $error_street}
									{block name="checkout_new_address_address_error"}
										<span class="help-block">
											{$error_street}
										</span>
									{/block}
								{/if}
							</div>
						{/block}
					{/if}
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_address_info_if"}
			{if $additional_address_info=='1'}
				{block name="checkout_new_address_address_info"}
					<div class="form-group">
						{block name="checkout_new_address_address_info_label"}
							<label for="{$form_data.additional_address_info.name}" class="control-label col-sm-3">
								{$account.text_additional_info}
							</label>
						{/block}
						
						{block name="checkout_new_address_address_info_container"}
							<div class="col-sm-9 col-lg-6 input-container">
								{block name="checkout_new_address_address_info_input"}
									<textarea id="{$form_data.additional_address_info.name}"
											  class="form-control"
											  maxlength="100"
											  name="{$form_data.additional_address_info.name}"
											  placeholder="{$account.text_additional_info}">{$form_data.additional_address_info.value}</textarea>
								{/block}
							</div>
						{/block}
					</div>
				{/block}
			{/if}
		{/block}
		
		{block name="checkout_new_address_suburb_if"}
			{if $suburb=='1'}
				{block name="checkout_new_address_suburb"}
					<div class="form-group{if $form_data.suburb.required == '1'} mandatory{/if}">
						{block name="checkout_new_address_suburb_label"}
							<label for="{$form_data.suburb.name}" class="control-label col-sm-3">
								{$txt.label_suburb}
							</label>
						{/block}
						
						{block name="checkout_new_address_suburb_container"}
							<div class="col-sm-9 col-lg-6 input-container">
								{block name="checkout_new_address_suburb_input"}
									<input type="text" placeholder="{$txt.label_suburb}" id="{$form_data.suburb.name}" name="{$form_data.suburb.name}" class="form-control" value="{$form_data.suburb.value}" />
								{/block}
							</div>
						{/block}
					</div>
				{/block}
			{/if}
		{/block}
		
		{block name="checkout_new_address_city_code"}
			<div class="element-set form-group{if $form_data.city.required == '1' || $form_data.postcode.required == '1'} mandatory{/if}{if $error_post_code || $error_city} has-feedback has-error{/if}">
				{block name="checkout_new_address_city_code_label"}
					<label for="{$form_data.postcode.name}" class="control-label col-sm-3">
						{$txt.label_code} / {$txt.label_city}
					</label>
				{/block}
				
				{block name="checkout_new_address_code_container"}
					<div class="col-sm-3 col-lg-2">
						{block name="checkout_new_address_code_input"}
							<input type="text" placeholder="{$txt.label_code}" name="{$form_data.postcode.name}" id="{$form_data.postcode.name}" class="form-control" value="{$form_data.postcode.value}" />
						{/block}
						
						{if $error_post_code}
							{block name="checkout_new_address_code_error"}
								<span class="help-block">
									{$error_post_code}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
				
				{block name="checkout_new_address_city_container"}
					<div class="col-sm-6 col-lg-4">
						{block name="checkout_new_address_city_input"}
							<input type="text" placeholder="{$txt.label_city}" name="{$form_data.city.name}" id="{$form_data.city.name}" class="form-control" value="{$form_data.city.value}" />
						{/block}
						
						{if $error_city}
							{block name="checkout_new_address_city_error"}
								<span class="help-block">
									{$error_city}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_state"}
			<div class="form-group{if $form_data.state.required == '1'} mandatory{else} hidden{/if}{if $error_state} has-error{/if} {if $state=='0'}hidden{/if}">
				{block name="checkout_new_address_state_label"}
					<label for="{$form_data.state.name}" class="control-label col-sm-3">
						{$txt.label_state}
					</label>
				{/block}
				
				{block name="checkout_new_address_state_container"}
					<div class="col-sm-9 col-lg-6 input-container">
						{block name="checkout_new_address_state_input"}
							<input type="hidden" name="selected_zone_id" value="{$form_data.state.value}" />
							<select id="{$form_data.state.name}" name="{$form_data.state.name}" class="form-control">
								<!-- Will be dynamically filled (see check_country.js). -->
							</select>
						{/block}
						
						{if $error_state}
							{block name="checkout_new_address_state_error"}
								<span class="help-block">{$error_state}</span>
							{/block}
						{/if}
					</div>
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_country"}
			<div class="form-group{if $form_data.country.required == '1'} mandatory{/if}{if $error_country} has-error{/if}">
				{block name="checkout_new_address_country_label"}
					<label for="{$form_data.country.name}" class="control-label col-sm-3">
						{$txt.label_country}
					</label>
				{/block}
				
				{block name="checkout_new_address_country_container"}
					<div class="col-sm-9 col-lg-6 input-container">
						{block name="checkout_new_address_country_input"}
							<select name="{$form_data.country.name}" id="{$form_data.country.name}" class="form-control">
								{foreach key=countries item=country_data from=$countries_data}
									{block name="checkout_new_address_country_option"}
										<option value="{$country_data.countries_id}"{if $country_data.countries_id == $form_data.country.value} selected="selected"{/if}>
											{$country_data.countries_name}
										</option>
									{/block}
								{/foreach}
							</select>
						{/block}
						
						{if $error_country}
							{block name="checkout_new_address_country_error"}
								<span class="help-block">
									{$error_country}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
			</div>
		{/block}
		
		{block name="checkout_new_address_b2b_if"}
			{if $show_b2b_status}
				{block name="checkout_new_address_b2b"}
					<div class="form-group{if $form_data.b2b_status.required == '1'} mandatory{/if}">
						{block name="checkout_new_address_b2b_label"}
							<label class="col-sm-3 control-label">
								{$txt.text_b2b_status}
							</label>
						{/block}
						
						{block name="checkout_new_address_b2b_container"}
							<div class="col-sm-9 col-lg-6 input-container">
								{block name="checkout_new_address_b2b_1_span"}
									<span class="radio-inline">
										<label class="" for="{$form_data.b2b_status.name}-1">
											{block name="checkout_new_address_b2b_1_input"}
												<input type="radio" id="{$form_data.b2b_status.name}-1"  name="{$form_data.b2b_status.name}" value="1"{if $form_data.b2b_status.checked == '1'} checked="checked"{/if} />
												{$txt.text_yes}
											{/block}
										</label>
									</span>
								{/block}
								
								{block name="checkout_new_address_b2b_0_span"}
									<span class="radio-inline">
										<span>
											&nbsp;
										</span>
										<label for="{$form_data.b2b_status.name}-0">
											{block name="checkout_new_address_b2b_0_input"}
												<input type="radio" id="{$form_data.b2b_status.name}-0" name="{$form_data.b2b_status.name}" value="0"{if $form_data.b2b_status.checked == '0'} checked="checked"{/if} />
												{$txt.text_no}
											{/block}
										</label>
									</span>
								{/block}
							</div>
						{/block}
					</div>
				{/block}
			{else}
				{block name="checkout_new_address_np_b2b"}
					<input type="hidden" name="{$form_data.b2b_status.name}" value="{$form_data.b2b_status.checked}" />
				{/block}
			{/if}
		{/block}
		
		{block name="checkout_new_address_privacy_if"}
			{if $GM_PRIVACY_LINK != '0'}
				{block name="checkout_new_address_privacy"}
					<div{if $error_privacy} class="has-error"{/if}>
						{if $show_privacy_checkbox}
							{block name="checkout_new_address_privacy_checkbox"}
								<input id="privacy_accepted" type="checkbox" name="privacy_accepted" value="1"{if $privacy_accepted} checked="checked"{/if}/>
								<label for="privacy_accepted">{$GM_PRIVACY_LINK}</label>
							{/block}
						{else}
							{block name="checkout_new_address_privacy_link"}
								<span>{$GM_PRIVACY_LINK}</span>
							{/block}
						{/if}
			
						{if $error_privacy}
							{block name="checkout_new_address_privacy_error"}
								<span class="help-block">
									{$error_privacy}
								</span>
							{/block}
						{/if}
					</div>
				{/block}
			{/if}
		{/block}
	</fieldset>
{/block}
