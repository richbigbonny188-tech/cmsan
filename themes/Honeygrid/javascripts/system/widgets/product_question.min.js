"use strict";gambio.widgets.module("product_question",["xhr",gambio.source+"/libs/modal.ext-magnific",gambio.source+"/libs/modal"],(function(o){var t=$(this),e=$("body"),n=$.extend(!0,{},{btnOpen:".btn-product-question",btnClose:".btn-close-question-window",btnSend:".btn-send-question",url:"shop.php?do=ProductQuestion",sendUrl:"shop.php?do=ProductQuestion/Send",productId:0,formSelector:"#product-question-form",productFormSelector:".js-product-form"},o),r={},c=function(o){o.preventDefault();var t=$(n.productFormSelector).serialize();jse.libs.xhr.get({url:n.url+"&"+t+"&productId="+n.productId},!0).done((function(o){i(),e.append(o.content),gambio.widgets.init($(".mfp-wrap")),a(),document.dispatchEvent(new Event("question-about-product-form-loaded"))}))},i=function o(){$(".mfp-bg, .mfp-wrap").remove(),$(n.btnSend).off("click",d),$(n.btnClose).off("click",o)},d=function(){if(function(){try{var o=$("#privacy_accepted"),e=!1;if(t.find(".form-group.mandatory, .checkbox-inline").removeClass("has-error"),t.find(".form-group.mandatory").each((function(){""===$(this).find(".form-control").val()&&($(this).addClass("has-error"),e=!0)})),o.length&&!o.prop("checked")&&(o.closest(".checkbox-inline").addClass("has-error"),e=!0),e)throw new Error;return!0}catch(o){return!1}}()){var o=$(n.productFormSelector).serialize(),r=n.sendUrl+"&"+o+"&productId="+n.productId,c=$(n.formSelector).serialize()+"&productLink="+location.href;$.ajax({url:r,data:c,type:"POST",dataType:"json"}).done((function(o){i(),e.append(o.content),gambio.widgets.init($(".mfp-wrap")),o.success||a()}))}},a=function(){"function"==typeof window.showRecaptcha&&setTimeout((function(){window.showRecaptcha("captcha_wrapper")}),500)};return r.init=function(o){void 0===n.modalMode&&$(n.btnOpen).on("click",c),$(n.btnSend).on("click",d),$(n.btnClose).on("click",i),o()},r}));