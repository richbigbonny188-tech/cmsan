"use strict";gambio.widgets.module("checkbox",[],(function(e){var s=$(this),a=!1,t=$.extend(!0,{},{filter:"",on_url:"",off_url:"",on_label:"",off_label:"",on_text:"",off_text:"",class:"",checked:!1},e),c={},i=function(e){if($(this).hasClass("disabled"))return!1;var s=$(this),a=s.find("input:checkbox"),c=s.find("input:radio").first(),i=s.find("input:radio").last(),o=s.find("select").first();s.parent().data("checkbox");s.toggleClass("checked"),s.find(".state-description").show().fadeOut("slow"),a.prop("checked",s.hasClass("checked")),c.prop("checked",s.hasClass("checked")),i.prop("checked",!s.hasClass("checked")),o.find("option").removeAttr("selected");var n=s.hasClass("checked")?1:0;if(o.find('option[value="'+n+'"]').attr("selected",!0),""!==t.on_url&&""!==t.off_url){if(e.preventDefault(),e.stopPropagation(),t.checked)return window.location.href=t.off_url,t.checked=!1,!1;window.location.href=t.on_url,t.checked=!0}},o=function(e){if($(this).hasClass("disabled"))return!1;a=!0,$(this).find("input:checkbox").focus()},n=function(e){if($(this).hasClass("disabled"))return!1;$(this).toggleClass("checked"),$(this).find("input:checkbox").focus(),a=!1},l=function(e){(e||s).find("input:checkbox").filter(t.filter||"*").each((function(){var e=$(this),s=e.parseModuleData("checkbox"),c=s.className||"",i=e.prop("title"),o=e.prop("checked")?"checked":"",n=e.prop("disabled")?"disabled":"";if(void 0!==e.data("single_checkbox")){e.css({position:"absolute",left:"-100000px"}).wrap('<span class="single-checkbox '+o+" "+n+'" title="'+i+'"></span>');var l=void 0!==t.useGlyphicons?"glyphicon glyphicon-ok":"fa fa-check";e.parent().append('<i class="'+l+'"></i>'),e.on("focus",(function(){$(".single_checkbox").removeClass("focused"),$(this).parent().addClass("focused")})),e.on("blur",(function(){$(this).parent().removeClass("focused")})),e.on("change",(function(){!1===a&&$(this).parent().toggleClass("checked")}))}else{var d=e.attr("data-checkbox-on_text")?e.attr("data-checkbox-on_text"):'<span class="fa fa-check"></span>',f=e.attr("data-checkbox-on_text")?e.attr("data-checkbox-off_text"):'<span class="fa fa-times"></span>';e.wrap('<div class="switcher '+o+" "+n+'" title="'+i+'"></div>').parent().data("checkbox",s).addClass(c).append('<div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on">'+d+'</div><div class="switcher-state-off">'+f+'</div></div><div class="switcher-text-on">'+t.on_text+'</div><div class="switcher-text-off">'+t.off_text+"</div>")}}))};return c.init=function(e){l(),function(){if(2===s.find("input:radio").filter(t.filter||"*").length){var e=s.find("input:radio").filter(t.filter||"*").first(),a=e.prop("title"),c=s.find("input:radio").filter(t.filter||"*").last(),i=c.prop("title"),o=""!==t.on_label?' data-checkbox-label="'+t.on_label+'"':"",n=""!==t.off_label?' data-checkbox-label="'+t.off_label+'"':"",l=t,d=e.prop("checked")?"checked":"",f=e.prop("disabled")?"disabled":"",r=$('<div class="switcher '+d+" "+f+'"></div>');e.after(r),e.appendTo(r),c.appendTo(r),r.data("checkbox",l).addClass(t.class).append('<div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on" title="'+a+'"'+o+'><span class="fa fa-check"></span></div><div class="switcher-state-off" title="'+i+'"'+n+'><span class="fa fa-times"></span></div><div class="switcher-text-on">'+t.on_text+'</div><div class="switcher-text-off">'+t.off_text+"</div></div>"),e.on("change",(function(){$(this).parent().toggleClass("checked")})),c.on("change",(function(){$(this).parent().toggleClass("checked")}))}}(),s.find("[data-convert-checkbox]").each((function(e,s){var a=$(s).find('option[value="1"]'),c=($(s).find('option[value="0"]'),a.is(":selected")?"checked":""),i=$(s).is(":disabled")?"disabled":"",o=$('<div class="switcher '+c+" "+i+'"></div>');o.addClass($(s).data("newClass")).data("checkbox",t).append('<div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on"><span class="fa fa-check"></span></div><div class="switcher-state-off"><span class="fa fa-times"></span></div></div>'),$(s).after(o).appendTo(o).hide()})),function(){if(""!==t.on_url&&""!==t.off_url){var e=s.parseModuleData("checkbox"),a=""!==t.on_label?' data-checkbox-label="'+t.on_label+'"':"",c=""!==t.off_label?' data-checkbox-label="'+t.off_label+'"':"",o=t.checked?"checked":"";s.data("checkbox",e).addClass("switcher").addClass(o).addClass(t.class).append('<div class="switcher-toggler"></div><div class="switcher-inner"><div class="switcher-state-on" title="'+t.off_url+'"'+a+'><span class="fa fa-check"></span></div><div class="switcher-state-off" title="'+t.on_url+'"'+c+'><span class="fa fa-times"></span></div></div>').on("click",i)}}(),s.on("click",".switcher",i),s.off("mousedown",".single-checkbox"),s.on("mousedown",".single-checkbox",o),s.off("mouseup",".single-checkbox"),s.on("mouseup",".single-checkbox",n),s.on("mousedown","label",(function(){a=!0})),s.on("mouseup","label",(function(){a=!1})),s.on("FORM_UPDATE",(function(e){var s=$(e.target);s.find("input:checkbox").each((function(){var e=$(this),s=e.closest(".switcher");s.length&&(s.find("div").remove(),e.unwrap())})),l(s)})),e()},c}));