"use strict";gambio.widgets.module("amazon_loginpay",[],(function(e){$(this),$("body");var o=null,n=null,d=null,r=$.extend(!0,{},{continueBtn:".btn-continue",placeholderId:null,mode:"addressbook",sellerId:null,clientId:null,widgetsSrc:null,readonlyAddressbook:null,readonlyWallet:null,requestURL:"request_port.php?module=AmazonAdvPay",countrytxt:"country not allowed"},e),l={init:function(e){n=$(r.continueBtn),window.onAmazonLoginReady=function(){amazon.Login.setClientId(r.clientId),amazon.Login.setUseCookie(!0)},window.onAmazonPaymentsReady=function(){if("addressbook"===r.mode&&new OffAmazonPayments.Widgets.AddressBook({sellerId:r.sellerId,design:{designMode:"responsive"},onOrderReferenceCreate:function(e){console.log(e),d=e.getAmazonOrderReferenceId(),$("#amz-orderrefid").val(d)},onAddressSelect:function(e){var l={orderrefid:d,action:"addressSelect"};$.post(r.requestURL,l).done((function(e){"false"===e.country_allowed?(n.hide(),o.show()):("true"===e.reload&&location.reload(),n.show(),o.hide())})).fail((function(e){alert("ERROR")})),console.log(d)},onReady:function(e){},onError:function(e){console.log(e)}}).bind(r.placeholderId),"wallet"===r.mode){var e={sellerId:r.sellerId,design:{designMode:"responsive"},onPaymentSelect:function(e){},onError:function(e){console.log(e)}};r.orderReferenceId?e.amazonOrderReferenceId=r.orderReferenceId:e.onOrderReferenceCreate=function(e){console.log(e),d=e.getAmazonOrderReferenceId(),$("#amz-orderrefid").val(d)},new OffAmazonPayments.Widgets.Wallet(e).bind(r.placeholderId)}"readonly"===r.mode&&(null!==document.querySelector("#"+r.readonlyAddressbook)&&new OffAmazonPayments.Widgets.AddressBook({sellerId:r.sellerId,design:{designMode:"responsive"},amazonOrderReferenceId:r.orderReferenceId,displayMode:"Read"}).bind(r.readonlyAddressbook),new OffAmazonPayments.Widgets.Wallet({sellerId:r.sellerId,design:{designMode:"responsive"},amazonOrderReferenceId:r.orderReferenceId,displayMode:"Read"}).bind(r.readonlyWallet)),$("#"+r.placeholderId).css("height","25em").css("margin-bottom","1em"),r.readonlyAddressbook&&$("#"+r.readonlyAddressbook).css("height","15em"),r.readonlyWallet&&$("#"+r.readonlyWallet).css("height","15em")},$("body").append($('<script src="'+r.widgetsSrc+'" async><\/script>')),"addressbook"===r.mode&&(o=$('<div class="amzadvpay_countrynotallowed" style="display: none;">'+r.countrytxt+"</div>"),$("#"+r.placeholderId).after(o)),e()}};return l}));