"use strict";gambio.widgets.module("amazon_checkout",[],(function(e){var t=$(this),n=$("body"),o=null,a=null,d=null,i=$.extend(!0,{},{sellerId:null,orderReference:null,size:{width:"600px",height:"400px"},sizeReadOnly:{width:"400px",height:"185px"},countryTxt:"",buttonTxt:"",continueBtn:".btn-continue",errorClass:"amzadvpay_countrynotallowed",buttonAClass:"btn btn-default btn-block amazonadvpay_signout",buttonClass:"col-xs-6 col-sm-6 col-md-4 col-md-offset-1 amazonadvpay_signoutbutton",buttonAppendAfter:".btn-back",requestURL:"request_port.php?module=AmazonAdvPay",signoutErrorUrl:"shopping_cart.php?error=apa_signout"},e),r={},l=function(e){var n=e&&e.data&&e.data.action?e.data:{orderrefid:i.orderReference,action:"addressSelect"};$.post(i.requestURL,n).done((function(e){"true"===e.reload&&window.location.reload(),e.redirect_url&&"signOut"===n.action&&(window.location=e.redirect_url),"false"===e.country_allowed?(d.hide(),t.after(o)):"signOut"!==n.action&&(d.show(),t.next("."+i.errorClass).remove())})).fail((function(e){"signOut"===n.action&&(window.location=i.signoutErrorUrl)}))};return r.init=function(e){if(!n.hasClass("amazon-payment-initialized")){n.addClass("amazon-payment-initialized"),o=$('<div class="'+i.errorClass+'">'+i.countryTxt+"</div>"),a=$('<div class="'+i.buttonClass+'"><a class="'+i.buttonAClass+'">'+i.buttonTxt+"</div></div>"),d=$(i.continueBtn),a.on("click",{orderrefid:"n/a",action:"signOut"},l),$(i.buttonAppendAfter).after(a);try{var t={sellerId:i.sellerId,amazonOrderReferenceId:i.orderReference,design:{designMode:"responsive"},onAddressSelect:l};null!==document.querySelector("#addressBookWidgetDiv")&&new OffAmazonPayments.Widgets.AddressBook(t).bind("addressBookWidgetDiv"),null!==document.querySelector("#walletWidgetDiv")&&(new OffAmazonPayments.Widgets.Wallet(t).bind("walletWidgetDiv"),document.querySelector("#walletWidgetDiv").style.height="25em");var r=document.querySelector("#readOnlyAddressBookWidgetDiv"),s=document.querySelector("#readOnlyWalletWidgetDiv");null!==r&&null!==s&&(r.style.height="12em",s.style.height="12em",s.style["margin-bottom"]="3em",$.extend(t,{displayMode:"Read"}),new OffAmazonPayments.Widgets.AddressBook(t).bind("readOnlyAddressBookWidgetDiv"),new OffAmazonPayments.Widgets.Wallet(t).bind("readOnlyWalletWidgetDiv"))}catch(e){}}e()},r}));